<!DOCTYPE html><html data-saber-ssr lang="zh-CN" class="serif" data-saber-head="%7B%22lang%22:%7B%22ssr%22:%22zh-CN%22%7D,%22class%22:%7B%22ssr%22:%22serif%22%7D%7D"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><meta data-saber-head="ssr" name="generator" content="Saber v0.11.6"><meta data-saber-head="ssr" name="author" content="NeverBehave"><meta data-saber-head="ssr" property="og:type" content="website"><meta data-saber-head="ssr" name="twitter:card" content="summary"><meta data-saber-head="ssr" name="twitter:creator" content="NeverBehave"><meta data-saber-head="ssr" name="description" content="迷の生物的迷の小窝" data-hid="description"><meta data-saber-head="ssr" name="keywords" content="undefined,,,,,,"><meta data-saber-head="ssr" property="og:title" content="Nano Pi NEO2 体验小记"><meta data-saber-head="ssr" property="og:description" content="迷の生物的迷の小窝"><meta data-saber-head="ssr" name="twitter:title" content="Nano Pi NEO2 体验小记"><meta data-saber-head="ssr" name="twitter:description" content="迷の生物的迷の小窝"> <title>Nano Pi NEO2 体验小记 - Never迷の小窝</title> <link data-saber-head="ssr" rel="manifest" href="/manifest.json"><link data-saber-head="ssr" rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png"><link data-saber-head="ssr" rel="alternate" title="Never迷の小窝 - Feed" href="https://blog.never.pet/feed/atom.xml" type="application/atom+xml"><link data-saber-head="ssr" href="https://cdn.jsdelivr.net/" rel="preconnect" crossorigin="true"><style data-vue-ssr-id="c371470e:0 4cf09be2:0 72951a42:0">.blendIn_16__k[data-src],.blendIn_16__k[data-srcset]{transition:filter .3s;filter:blur(5px)}.blendIn_16__k[data-lazy-loaded]{filter:none}
blockquote,body,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,ol,p,pre,ul{margin:0;padding:0}body{font:400 16px/1.5 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;color:#111;background-color:#fdfdfd;-webkit-text-size-adjust:100%;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;font-feature-settings:"kern" 1;font-kerning:normal;display:flex;min-height:100vh;flex-direction:column}blockquote,dl,figure,h1,h2,h3,h4,h5,h6,ol,p,pre,ul{margin-bottom:15px}main{display:block}img{max-width:100%;vertical-align:middle}figure>img{display:block}figcaption{font-size:14px}ol,ul{margin-left:30px}li>ol,li>ul{margin-bottom:0}h1,h2,h3,h4,h5,h6{font-weight:400}a{color:#2a7ae2;text-decoration:none}a:visited{color:#1756a9}a:hover{color:#111;text-decoration:underline}.social-media-list a:hover{text-decoration:none}.social-media-list a:hover .username{text-decoration:underline}blockquote{color:#828282;border-left:4px solid #e8e8e8;padding-left:15px;font-size:18px;letter-spacing:-1px;font-style:italic}blockquote>:last-child{margin-bottom:0}code,pre{font-size:15px;border:1px solid #e8e8e8;border-radius:3px;background-color:#eef}code{padding:1px 5px}pre{padding:8px 12px;overflow-x:auto}pre>code{border:0;padding-right:0;padding-left:0}.wrapper{max-width:770px;margin-right:auto;margin-left:auto;padding-right:15px;padding-left:15px}@media screen and (min-width:800px){.wrapper{max-width:740px;padding-right:30px;padding-left:30px}}.footer-col-wrapper:after,.wrapper:after{content:"";display:table;clear:both}.orange{color:#f66a0a}.grey{color:#828282}.svg-icon{width:16px;height:16px;display:inline-block;fill:currentColor;padding:5px 3px 2px 5px;vertical-align:text-bottom}table{margin-bottom:30px;width:100%;text-align:left;color:#3f3f3f;border-collapse:collapse;border:1px solid #e8e8e8}table tr:nth-child(2n){background-color:#f7f7f7}table td,table th{padding:10px 15px}table th{background-color:#f0f0f0;border:1px solid #dedede;border-bottom-color:#c9c9c9}table td{border:1px solid #e8e8e8}.site-header{border-top:5px solid #424242;border-bottom:1px solid #e8e8e8;min-height:55.95px;line-height:54px;position:relative}.site-title{font-size:26px;font-weight:300;letter-spacing:-1px;margin-bottom:0;float:left}@media screen and (max-width:600px){.site-title{padding-right:45px}}.site-title,.site-title:visited{color:#424242}.site-nav{position:absolute;top:9px;right:15px;background-color:#fdfdfd;border:1px solid #e8e8e8;border-radius:5px;text-align:right}.site-nav .nav-trigger{display:none}.site-nav .menu-icon{float:right;width:36px;height:26px;line-height:0;padding-top:10px;text-align:center}.site-nav .menu-icon>svg path{fill:#424242}.site-nav label[for=nav-trigger]{display:block;float:right;width:36px;height:36px;z-index:2;cursor:pointer}.site-nav input~.trigger{clear:both;display:none}.site-nav input:checked~.trigger{display:block;padding-bottom:5px}.site-nav .page-link{color:#111;line-height:1.5;display:block;padding:5px 10px;margin-left:20px}.site-nav .page-link:not(:last-child){margin-right:0}@media screen and (min-width:600px){.site-nav{position:static;float:right;border:none;background-color:inherit}.site-nav .menu-icon,.site-nav label[for=nav-trigger]{display:none}.site-nav input~.trigger{display:block}.site-nav .page-link{display:inline;padding:0;margin-left:auto}.site-nav .page-link:not(:last-child){margin-right:20px}}.pagination{margin-bottom:25px;font-size:.875rem}.pagination .next-link,.pagination .prev-link{border:1px solid #e8e8e8;padding:5px 10px;color:#111}.site-footer{border-top:1px solid #e8e8e8;padding:30px 0}.footer-heading{font-size:18px;margin-bottom:15px}.contact-list,.social-media-list{list-style:none;margin-left:0}.footer-col-wrapper{font-size:15px;color:#828282;margin-left:-15px}.footer-col{width:-webkit-calc(100% - 15px);width:calc(100% - 15px);margin-bottom:15px;padding-left:15px}.footer-col-1,.footer-col-2{width:-webkit-calc(50% - 15px);width:calc(50% - 15px)}.footer-col-3{width:-webkit-calc(100% - 15px);width:calc(100% - 15px)}@media screen and (min-width:800px){.footer-col-1{width:-webkit-calc(35% - 15px);width:calc(35% - 15px)}.footer-col-2{width:-webkit-calc(20% - 15px);width:calc(20% - 15px)}.footer-col-3{width:-webkit-calc(45% - 15px);width:calc(45% - 15px)}}@media screen and (min-width:600px){.footer-col{float:left}}.page-content{padding:30px 0;flex:1 0 auto}.page-heading{font-size:32px}.post-list-heading{font-size:28px}.post-list{margin-left:0;list-style:none}.post-list>li{margin-bottom:30px}.post-meta{font-size:14px;color:#828282}.post-link{display:block;font-size:24px}.post-header{margin-bottom:30px}.post-content h1,.post-title{font-size:42px;letter-spacing:-1px;line-height:1}@media screen and (min-width:800px){.post-content h1,.post-title{font-size:42px}}.post-content{margin-bottom:30px}.post-content h2{font-size:28px}@media screen and (min-width:800px){.post-content h2{font-size:32px}}.post-content h3{font-size:22px}@media screen and (min-width:800px){.post-content h3{font-size:26px}}.post-content h4{font-size:18px}@media screen and (min-width:800px){.post-content h4{font-size:20px}}.social-media-list{display:table;margin:0 auto}.social-media-list li{float:left;margin:0 5px}.social-media-list li:first-of-type{margin-left:0}.social-media-list li:last-of-type{margin-right:0}.social-media-list li a{display:block;padding:7.5px;border:1px solid #e8e8e8}.social-media-list li:hover .svg-icon{fill:currentColor}.one-half{width:-webkit-calc(50% - 15px);width:calc(50% - 15px)}
.saber-highlight{position:relative;overflow:hidden;margin:2rem 0;background:#f5f7fa;border-radius:4px}.saber-highlight:before{content:attr(data-lang);position:absolute;right:10px;top:5px;font-size:.75rem;color:#bdc5d1}.saber-highlight-code,.saber-highlight-mask{line-height:1.5;background-color:transparent!important;text-shadow:none!important;box-shadow:none!important;margin:0!important;padding:1.25rem 1.5rem!important;white-space:pre}.saber-highlight-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;color:transparent!important;padding-left:0!important;padding-right:0!important}.saber-highlight-code{position:relative;z-index:2;font-size:0!important}.saber-highlight-code code,.saber-highlight-mask{font-size:.875rem}.code-line.highlighted{background:rgba(3,169,244,.121)}.saber-highlight-line-numbers{pointer-events:none;font-size:100%;float:left;letter-spacing:-1px;border-right:1px solid #999;user-select:none;text-align:right;padding-right:.8rem;margin-right:.8rem;counter-reset:linenumber}.saber-highlight-line-numbers>span{counter-increment:linenumber;display:block}.saber-highlight-line-numbers>span:before{content:counter(linenumber);color:#999;display:block}</style>  </head><body><div id="_saber" data-server-rendered="true"><div><header class="site-header"><div class="wrapper"><a href="/" rel="author" class="site-title router-link-active">Never迷の小窝</a> <nav class="site-nav"><input type="checkbox" id="nav-trigger" class="nav-trigger"> <label for="nav-trigger"><span class="menu-icon"><svg viewBox="0 0 18 15" width="18px" height="15px"><path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path></svg></span></label> <div class="trigger"><a href="/" class="page-link router-link-active">Home</a><a href="/about" class="page-link">About</a><a rel="noopener noreferrer" target="_blank" href="https://never.pet" class="page-link">Social</a><a href="/friends" class="page-link">Friends</a></div></nav></div></header> <main aria-label="Content" class="page-content"><div class="wrapper"><article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" class="post h-entry"><header class="post-header"><h1 itemprop="name headline" class="post-title p-name">Nano Pi NEO2 体验小记</h1> <div align="left" class="post-meta"><time datetime="Fri May 31 2019 11:42:00 GMT+0800 (China Standard Time)" itemprop="datePublished" class="dt-published" style="display:inline-block;">2019-05-31</time> <section class="page-categories"><span><!----> <a href="/blog/category/technology" class="category">技术</a></span></section> <section class="page-block-action"><div class="page-share"></div> <div class="page-tags"><span><!----> <span class="tag">项目</span></span><span><span>,</span> <span class="tag">nanopi</span></span><span><span>,</span> <span class="tag">arm</span></span><span><span>,</span> <span class="tag">折腾</span></span><span><span>,</span> <span class="tag">监控</span></span><span><span>,</span> <span class="tag">zerotier</span></span></div></section></div></header> <div itemprop="articleBody" class="post-content e-content"><h2 id="剧情前提">剧情前提</h2> <p>之前给几家店铺做了监控方案的设计，用的是POE供电摄像头配NVR。采用的是大华的方案，但是是自己直接去公司拿货自配帮忙布线，顺便把路由部分也包了。</p> <p>大华的方案好处是有乐橙云，绑定机器后相当傻瓜，可以直接用APP观看实时或者历史录像。但是机器设置还是要到现场（应该是为了安全）。</p> <p>然而部分店铺没有配置显示器，而且大华逐渐淘汰了他们的Web界面，转用客户端连接。每次需要调整配置需要到现场链接网络调试，非常的不方便</p> <h2 id="初步想法">初步想法</h2> <p>当时就想的是做内网穿透，因为都是小店用的都是一般的宽带，公网是没有了。这样子每次只要有问题直接穿透回去看看就好了，还可以顺便监控一下网络质量（☑️</p> <h3 id="选型">选型</h3> <p>内网穿透嘛……国内比较有名的也就是花生壳了，但是花生棒99元还要购买后续服务，宽带也小得可怜，果断pass</p> <p>其他的一些冷门点的公司又信不过，而且部分店铺是用的相当原始的路由器（主要是TPLINK家用，部分是企业级），虽然说普联自带了一个IPSec，但是部分店铺又没有，租用国内服务器价格也不算便宜（自建SLA===0），于是又pass</p> <p>同时也发现极路由之类的智能路由似乎带有这种功能，比如Zerotier，但是这种东西定制性...还不如自己加块树莓派上去</p> <p>等等，树莓派？</p> <h4 id="价格">价格</h4> <p>还是有点贵啊，淘宝转了一圈3B普遍200+，而且还没有外壳。不过为了测试我自己做内网穿透的机器，我还是先从 @Kookxiang 手里淘了一个二手树莓派，150带金属外壳</p> <p>介于之前接触了一下 ripe probe，那个小巧的外形让我觉得...价格应该不算很高吧（毕竟都是免费发），功耗也很低。查了一下名字neo2，淘宝一看基本价格100左右，全志H5性能也不算差，而且<strong>网口是千兆的</strong>，那就试试看吧</p> <p>（其实就是树莓派玩腻了hhh）</p> <p><a rel="noopener noreferrer" target="_blank" href="https://www.friendlyarm.com/index.php?route=product/product&amp;product_id=180&amp;search=neo2&amp;description=true&amp;category_id=0">参数/购买参考地址</a></p> <h5 id="小插曲">小插曲</h5> <p>淘宝店铺最低的是99，当我看上了准备买的时候，发现商家是广州的，一问是不是在岗顶的新赛格，还真的是，于是直接上门买了，省下10块钱邮费，嘻嘻</p> <iframe frameborder="0" scrolling="no" width="100%" src="https://t.me/ButNothingHappened/2956?embed=1&amp;" id="telegram-post-ButNothingHappened-2956" height="80px" data-v-15507ed4></iframe> <h2 id="跑！">跑！</h2> <p>团队名字叫做友善之臂，感觉这个国内这个翻译有点小硬（ARM =&gt; 手臂）</p> <p>扫了一遍<code>wiki</code>默认给了 <code>Ubuntu 16.04</code> 的包，那就先试试吧</p> <h3 id="下包">下包</h3> <p><a rel="noopener noreferrer" target="_blank" href="http://wiki.friendlyarm.com/wiki/index.php/NanoPi_NEO2">Wiki Page</a></p> <h3 id="烧卡">烧卡</h3> <p>16G应该算是底线了，去网上随便淘了几张金士顿的16G，烧上系统差不多8G</p> <p>一开始想试试看<code>ArchLinux</code>的<code>Alarm</code>，但是懒得折腾就还是上了官方包</p> <p>NanoPI的卡槽是有弹簧的，这个比树莓派体验好上不少</p> <p>我在windows做的就是用的<code>Win32DiskImager</code>，一开始觉得还是一个盗版玩意结果不是（</p> <h3 id="开机">开机</h3> <iframe frameborder="0" scrolling="no" width="100%" src="https://t.me/ButNothingHappened/2958?embed=1&amp;" id="telegram-post-ButNothingHappened-2958" height="80px" data-v-15507ed4></iframe> <p>（见上图）开机直接飙到46度，是有点小难受，早知道就配上散热片了，开久了亚克力板还是有点烫的。因为是监控机要求长时间开着，这个算是有点失策。</p> <p>用户默认pi@pi，ssh啥的也开好了，测了一下系统默认有个用户<code>fa</code>，不知道干啥的于是删掉了。似乎是以前用的名字（friendarm）。镜像没太多检测可能还是有点坑，还要找时间看看咋回事（咕咕咕</p> <h4 id="装-zerotier">装 Zerotier</h4> <p>官方安装脚本地址：<a rel="noopener noreferrer" target="_blank" href="https://install.zerotier.com/">https://install.zerotier.com/</a></p> <p>没有毛病，按照指令装就好了，略略略</p> <p>每次需要维护直接ssh转发端口，就可以直接进到内网咯，完美</p> <h2 id="后记">后记</h2> <p>接下来顺便还玩了不少有趣的东西（或者小发现）</p> <h3 id="zerotier">Zerotier</h3> <p>一开始想着<code>zeortier</code>国内穿透可能一般般，现在国内大内网肯定要转发，节点的话……看了一下应该都是<code>AWS</code>的，但是出乎意料的连通性很好，而且很稳。<s>看来这车没翻</s></p> <h3 id="ss">SS</h3> <p>后面还是在每台机器上跑了SS，懒得ssh转发端口了（嘻嘻），而且这样子相当于多了个三个国内出口（电信，移动，联通，电视网全都有了），突然有趣</p> <h3 id="torch">Torch</h3> <p>想着平时用的也不多，机器空转着也没啥用，就顺便做了<a rel="noopener noreferrer" target="_blank" href="https://github.com/Torchping">Torch</a>的监测点。</p> <blockquote><p>简单说一下，这是一个TCPING检测的工具，并对外提供了API，如果节点在国内可以用于检测节点是否被墙。</p></blockquote> <p>目前赞助的节点都在机房，我是没这个钱，但是目前既然有这么好的家宽节点，为什么不用呢（</p> <p>把之前魔方云给的节点接入这个组网里面，然后配置一下<code>Caddy</code>反向代理……完美</p> <p>（然而最近魔方云炸裂了，噗）</p> <h3 id="其他">其他</h3> <p>但是目前开机时间差不多有快一个月，安置机器的时候放的稍微透风一点，似乎没有太多问题。</p> <p>后续还有更多玩法的话，就在更新好了一直没用上针脚的功能呢……</p></div> <div id="disqus_thread"></div> <a href="/2019/05/31/nano-pi-neo2-first-experience" hidden="hidden" class="u-url router-link-exact-active router-link-active"></a></article></div></main> <footer class="site-footer h-card"><div class="wrapper"><div class="footer-col-wrapper"><div class="footer-col one-half"><h2 class="footer-heading">Never迷の小窝</h2> <ul class="contact-list"><li class="p-name">NeverBehave</li> <li><a href="mailto:i@never.pet" class="u-email">i@never.pet</a></li></ul></div> <div class="footer-col one-half"><p>迷の生物的迷の小窝</p></div> <div class="social-links"></div></div></div></footer></div></div><script src="https://cdn.jsdelivr.net/gh/homeofnever/blog@gh-pages/_saber/js/client.5b73436e.js" defer></script><script src="https://cdn.jsdelivr.net/gh/homeofnever/blog@gh-pages/_saber/js/page--_posts-nano-pi-neo2-first-experience-md.53d68819.js" defer></script></body></html>
