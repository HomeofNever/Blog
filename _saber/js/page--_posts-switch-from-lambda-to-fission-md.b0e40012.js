(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{129:function(e,t,a){e.exports={srcSet:a.p+"9bd6bca49d69f3ccccc883809640b54e-749.png 749w,"+a.p+"cda3c5c951f086566b43917ac3f4b6c6-720.png 720w,"+a.p+"32df7e8a8f0f7e502f604065395a73b0-480.png 480w",images:[{path:a.p+"9bd6bca49d69f3ccccc883809640b54e-749.png",width:749,height:926},{path:a.p+"cda3c5c951f086566b43917ac3f4b6c6-720.png",width:720,height:890},{path:a.p+"32df7e8a8f0f7e502f604065395a73b0-480.png",width:480,height:593}],src:a.p+"9bd6bca49d69f3ccccc883809640b54e-749.png",toString:function(){return a.p+"9bd6bca49d69f3ccccc883809640b54e-749.png"},placeholder:"data:image/png;base64,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",width:749,height:926}},178:function(e,t,a){"use strict";a.r(t);var s=a(0),o=function(e){var t,a,s,o,i,n,v,r,l=(s=void 0,o="node",i="lambda",n="fission",v="事故前提",r="迁移一个目前已经有的项目",(t={}).type=a="post",t.internal=s,t.contentType="markdown",t.slug="switch-from-lambda-to-fission",t.content=s,t.createdAt=new Date(15900192e5),t.updatedAt=new Date(1648315377752),t.title="从AWS lambda迁移到Fission",t.tags=["折腾",o,i,n,"k8s"],t.categories=["技术"],t.layout=a,t.date="2020-05-21",t.markdownHeadings=[{text:v,slug:v,level:2},{text:"题外: 为什么不用 Netlify/Vercel",slug:"题外-为什么不用-netlifyvercel",level:3},{text:"About Fission",slug:"about-fission",level:2},{text:"安装",slug:"安装",level:3},{text:"Ingress 设置",slug:"ingress-设置",level:4},{text:"本地 CLI",slug:"本地-cli",level:4},{text:r,slug:r,level:3},{text:"入口",slug:"入口",level:4},{text:"坑",slug:"坑",level:4}],t.excerpt='<p>我开始用<code v-pre="">aws lambda</code>的时间大约是它还只有<code v-pre="">node v8</code>运行时的时候, 主要其免费的额度确实相当的诱人, 加上学生赠与的免费<code v-pre="">credit</code>, 香的一批</p>\n',t.permalink="/2020/05/21/switch-from-lambda-to-fission",t.assets={},t.attributes=t,t.tagsInfo=[{name:"折腾",permalink:"/blog/tag/折腾"},{name:o,permalink:"/blog/tag/node"},{name:i,permalink:"/blog/tag/lambda"},{name:n,permalink:"/blog/tag/fission"},{name:"k8s",permalink:"/blog/tag/k8s"}],t.categoriesInfo=[{name:"技术",permalink:"/blog/category/technology"}],t),p=e.options.beforeCreate||[];e.options.beforeCreate=[function(){this.$page=l}].concat(p);["layout","transition"].forEach((function(t){var a=e.options.PageComponent;a&&(e.options[t]=a[t]),void 0===e.options[t]&&(e.options[t]=l[t])})),l.slug&&(e.options.name="page-wrapper-"+l.slug.replace(/[^0-9a-z\-]/gi,"-"))},i=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("layout-manager",[s("h2",{attrs:{id:"事故前提"}},[e._v("事故前提")]),e._v(" "),s("p",[e._v("我开始用"),s("code",{pre:!0},[e._v("aws lambda")]),e._v("的时间大约是它还只有"),s("code",{pre:!0},[e._v("node v8")]),e._v("运行时的时候, 主要其免费的额度确实相当的诱人, 加上学生赠与的免费"),s("code",{pre:!0},[e._v("credit")]),e._v(", 香的一批")]),e._v(" "),s("p",[e._v("直到我发现"),s("code",{pre:!0},[e._v("API Gateway")]),e._v("不在免费额度抵扣范围内(?疑惑), 虽然现在是的了")]),e._v(" "),s("p",[e._v("其中我还用过一次他的"),s("code",{pre:!0},[e._v("LightSail")]),e._v(", 也是被"),s("saber-link",{attrs:{to:"https://blog.indexyz.me"}},[e._v("@indexyz")]),e._v(" 拉上贼船的. 当时是他从淘宝买了一些每个帐号只能用两张的券, 结果额度扣完了没发现, 直到结算到我信用卡的时候才发现了")],1),e._v(" "),s("p",[e._v("总共扣了我大几十刀的样子, 很难受, 而且也让我对绑定额度太高的信用卡上去有了阴影(要不是及时停下来了). 没有额度的情况下, "),s("code",{pre:!0},[e._v("lambda")]),e._v("虽然每个月都有免费额度, 流量和"),s("code",{pre:!0},[e._v("API Gateway")]),e._v("依然计算费用. 目前每个月我都会看到几块钱的扣费")]),e._v(" "),s("figure",[s("saber-image",{attrs:{src:a(129),alt:"","data-lazy":"{}"}})],1),e._v(" "),s("p",[e._v("唉, 好不爽哦")]),e._v(" "),s("p",[e._v("刚好这个时候, "),s("saber-link",{attrs:{to:"https://zhaofeng.li"}},[e._v("@zhaofeng")]),e._v(" 和我说:")],1),e._v(" "),s("blockquote",[s("p",[e._v("我的小东西现在都放在 fission 了")])]),e._v(" "),s("p",[s("saber-link",{attrs:{to:"https://fission.io"}},[e._v("fission")]),e._v("? 这是啥")],1),e._v(" "),s("h3",{attrs:{id:"题外-为什么不用-netlifyvercel"}},[e._v("题外: 为什么不用 Netlify/Vercel")]),e._v(" "),s("p",[e._v("大部分放在"),s("code",{pre:!0},[e._v("lambda")]),e._v("上面的东西是一些实验品, 机器人一类")]),e._v(" "),s("p",[e._v("在"),s("code",{pre:!0},[e._v("Vercel")]),e._v("出来之前, netlify, firebase的function我感觉都不尽人意, 处理起来很不舒服")]),e._v(" "),s("p",[e._v("但是在经过"),s("saber-link",{attrs:{to:"https://github.com/DIYgod/RSSHub/issues/4334"}},[e._v("这个issue")]),e._v("后, 我觉得"),s("code",{pre:!0},[e._v("Vercel")]),e._v("的处理确实很舒服, 算是目前打包上线体验比较好的平台了. 主要问题应该就是免费额度有点小")],1),e._v(" "),s("h2",{attrs:{id:"about-fission"}},[e._v("About Fission")]),e._v(" "),s("p",[e._v("这里引用 "),s("saber-link",{attrs:{to:"https://zhaofeng.li"}},[e._v("@zhaofeng")]),e._v(" 的三句话")],1),e._v(" "),s("blockquote",[s("p",[e._v("self-hosted aws lambda，不需要 build 任何 image")])]),e._v(" "),s("blockquote",[s("p",[e._v("cold-starts under 100ms")])]),e._v(" "),s("blockquote",[s("p",[e._v("然后比 aws lambda 简单很多")])]),e._v(" "),s("p",[e._v("它的做法是用提前准备好的 runtime container （和 lambda 差不多），然后挂载你的代码")]),e._v(" "),s("p",[e._v("于此同时, 相似功能的还有"),s("saber-link",{attrs:{to:"https://www.openfaas.com/"}},[e._v("openfaas")]),e._v("，不过不推荐，因为还是需要针对每个"),s("code",{pre:!0},[e._v("function")]),e._v("构建单独的镜像")],1),e._v(" "),s("p",[s("strong",[e._v("在继续之前请注意, fission 是基于k8s的, 如果你没有集群, 往下可以跳过了(别打我quq)")])]),e._v(" "),s("p",[s("s",[e._v("当然, 你要是不差钱的话, "),s("saber-link",{attrs:{to:"https://cloud.google.com/anthos/gke"}},[e._v("https://cloud.google.com/anthos/gke")])],1)]),e._v(" "),s("blockquote",[s("p",[e._v("如果你没有懂这个梗的话:"),s("saber-link",{attrs:{to:"https://web.archive.org/web/20190717144230/https://cloud.google.com/anthos/pricing"}},[e._v("https://web.archive.org/web/20190717144230/https://cloud.google.com/anthos/pricing")])],1)]),e._v(" "),s("h3",{attrs:{id:"安装"}},[e._v("安装")]),e._v(" "),s("p",[s("saber-link",{attrs:{to:"https://docs.fission.io/docs/installation/"}},[e._v("https://docs.fission.io/docs/installation/")])],1),e._v(" "),s("blockquote",[s("p",[e._v("@zhaofeng"),s("br"),e._v("\n它的 yaml 也是 helm template 生成的，有点毒"),s("br"),e._v("\n好多 pod 都没有 namespace"),s("br"),e._v("\n即使你 helm 设了 --namespace，它出来的 manifest 还是有毒的"),s("br"),e._v("\n它原来的初衷是让你 kubectl apply -n yourns 让 kubecrl 填充剩下的 ns，不过现在 kubectl 不让你这么做了"),s("br"),e._v("\n其中指定的 namespace 和你 -n 里的 ns 不同会报错")])]),e._v(" "),s("p",[e._v("就这样"),s("s",[e._v("和NPC对话后")]),e._v("我获得了一份典藏的"),s("code",{pre:!0},[e._v("Makefile")])]),e._v(" "),s("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"makefile"}},[s("pre",{pre:!0,attrs:{class:"saber-highlight-code language-makefile"}},[s("code",{pre:!0,attrs:{class:"language-makefile"}},[s("span",{pre:!0,attrs:{class:"token symbol"}},[e._v("rendered.yml")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" values.helm.yml\n    helm template fission \\\n        --namespace fission \\\n        -f values.helm.yml \\\n"),s("span",{pre:!0,attrs:{class:"token symbol"}},[e._v("        https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//github.com/fission/fission/releases/download/1.8.0/fission-all-1.8.0.tgz \\\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" yq -Y "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'if has("metadata") and (.metadata | has("namespace")) then . else .metadata.namespace="fission" | . end\'')]),e._v(" > rendered.yml\n\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[e._v(".PHONY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" clean\n"),s("span",{pre:!0,attrs:{class:"token symbol"}},[e._v("clean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    rm -f rendered.yml")])])]),s("p",[e._v("anyway, 生成出来的"),s("code",{pre:!0},[e._v("rendered.yml")]),e._v("可以食用了w")]),e._v(" "),s("h4",{attrs:{id:"ingress-设置"}},[e._v("Ingress 设置")]),e._v(" "),s("p",[e._v("虽然"),s("code",{pre:!0},[e._v("fission")]),e._v("支持给每个"),s("code",{pre:!0},[e._v("function")]),e._v("生成自定的"),s("code",{pre:!0},[e._v("ingress")]),e._v(", 这样带来的问题是, 我没有设定"),s("code",{pre:!0},[e._v("dns")]),e._v("啥的配合")]),e._v(" "),s("p",[e._v("所以目前我全部的函数都挂在到一个"),s("code",{pre:!0},[e._v("ingress")])]),e._v(" "),s("h4",{attrs:{id:"本地-cli"}},[e._v("本地 CLI")]),e._v(" "),s("p",[e._v("fission将会直接读取"),s("code",{pre:!0},[e._v("KUBECONFIG")]),e._v("并连接到集群, 建议使用"),s("code",{pre:!0},[e._v("CLI")]),e._v("连接")]),e._v(" "),s("p",[s("saber-link",{attrs:{to:"https://docs.fission.io/docs/installation/#install-fission-cli"}},[e._v("https://docs.fission.io/docs/installation/#install-fission-cli")])],1),e._v(" "),s("h3",{attrs:{id:"迁移一个目前已经有的项目"}},[e._v("迁移一个目前已经有的项目")]),e._v(" "),s("p",[e._v("行吧, 先上手迁移一个项目试试: "),s("saber-link",{attrs:{to:"https://github.com/abusetelegram/xixi-haha"}},[e._v("https://github.com/abusetelegram/xixi-haha")])],1),e._v(" "),s("p",[e._v("分成两个部分, 一个是"),s("code",{pre:!0},[e._v("api")]),e._v(", 返回"),s("code",{pre:!0},[e._v("yiyan")])]),e._v(" "),s("p",[e._v("还有一个是"),s("code",{pre:!0},[e._v("Telegram Bot")])]),e._v(" "),s("p",[e._v("指南: "),s("saber-link",{attrs:{to:"https://docs.fission.io/docs/languages/nodejs/"}},[e._v("https://docs.fission.io/docs/languages/nodejs/")])],1),e._v(" "),s("p",[e._v("简要提及一下过程:")]),e._v(" "),s("ul",[s("li",[s("saber-link",{attrs:{to:"https://docs.fission.io/docs/languages/nodejs/#add-the-nodejs-runtime-environment-to-your-cluster"}},[e._v("创建环境")])],1),e._v(" "),s("li",[e._v("创建"),s("code",{pre:!0},[e._v("PKG")]),e._v(" "),s("ul",[s("li",[s("code",{pre:!0},[e._v("fission package create --src release.zip --env nodejs --name xixi-haha-bot")])]),e._v(" "),s("li",[e._v("将项目打包进"),s("code",{pre:!0},[e._v("zip")]),e._v(", 指定使用环境和名字, 环境对应的"),s("code",{pre:!0},[e._v("builder")]),e._v("将会运行并执行打包")]),e._v(" "),s("li",[e._v("你可以自定义这个过程, 打包属于你自己的"),s("code",{pre:!0},[e._v("builder")]),s("saber-link",{attrs:{to:"https://docs.fission.io/docs/languages/nodejs/#modifying-the-nodejs-runtime-image"}},[e._v("参见")])],1)])]),e._v(" "),s("li",[e._v("创建"),s("code",{pre:!0},[e._v("fn")]),e._v(" "),s("ul",[s("li",[s("code",{pre:!0},[e._v("fission function create --name xixi-haha-bot --pkg xixi-haha-bot --env nodejs --entrypoint fission")])]),e._v(" "),s("li",[e._v("指定名字, 打包好的包, 环境以及入口")])])]),e._v(" "),s("li",[e._v("(可选)测试\n"),s("ul",[s("li",[s("code",{pre:!0},[e._v("fission fn test --name xixi-haha-bot")])]),e._v(" "),s("li",[e._v("直接测试触发")])])]),e._v(" "),s("li",[e._v("部署"),s("code",{pre:!0},[e._v("httptrigger")]),e._v(" "),s("ul",[s("li",[s("code",{pre:!0},[e._v('fission httptrigger create --method POST --url "url/you/want" --function xixi-haha-bot --name "xixi-haha-bot-post-route"')])]),e._v(" "),s("li",[e._v("指定路径, 创建好的"),s("code",{pre:!0},[e._v("fn")]),e._v(", 名字即可")])])]),e._v(" "),s("li",[e._v("(可选)查看日志\n"),s("ul",[s("li",[s("code",{pre:!0},[e._v("fission fn log --name xixi-haha-bot")])])])])]),e._v(" "),s("p",[e._v("几行下来, 一个完整的函数就上线了, 默认超时, cpu, 内存以及更多"),s("code",{pre:!0},[e._v("cli")]),e._v("操作就不再叙述了")]),e._v(" "),s("p",[e._v("最重要的是, 可以配合"),s("code",{pre:!0},[e._v("release")]),e._v(", 直接传入"),s("code",{pre:!0},[e._v("url")]),e._v("下载打包好的应用更新包, 食用起来还是很舒服的")]),e._v(" "),s("h4",{attrs:{id:"入口"}},[e._v("入口")]),e._v(" "),s("p",[e._v("稍微和lambda有点不一样, 没有"),s("code",{pre:!0},[e._v("callback")]),e._v(",标准的传入"),s("code",{pre:!0},[e._v("res, req")]),e._v(", 要求一个方法而不是对象")]),e._v(" "),s("p",[e._v("具体区别可以对比"),s("saber-link",{attrs:{to:"https://github.com/abusetelegram/xixi-haha/blob/master/lambda/fission.js"}},[e._v("fission.js")]),e._v("和"),s("saber-link",{attrs:{to:"https://github.com/abusetelegram/xixi-haha/blob/master/lambda/lambda.js"}},[e._v("lambda.js")])],1),e._v(" "),s("h4",{attrs:{id:"坑"}},[e._v("坑")]),e._v(" "),s("p",[e._v("顺便讲几个小坑:")]),e._v(" "),s("ul",[s("li",[e._v("Web界面还不是很完善")]),e._v(" "),s("li",[e._v("暂时没有找到"),s("code",{pre:!0},[e._v("process.env")]),e._v("的注入方式\n"),s("ul",[s("li",[e._v("目前我的解决方案是用"),s("code",{pre:!0},[e._v("dotenv")]),e._v(", 但是问题是代码挂载的位置"),s("saber-link",{attrs:{to:"https://github.com/fission/fission/blob/aa8c27fd5d9a1b92062d87e73a0e96f1c9b7ba7a/environments/nodejs/builder/build.sh#L3"}},[e._v("并不是根目录")]),e._v(", 所以需要强行指定一下. "),s("saber-link",{attrs:{to:"https://github.com/abusetelegram/xixi-haha/blob/d7b288aa285a940eece862ce97abb006b3be9ff1/lambda/index.js#L3"}},[e._v("解决方案")])],1)])])]),e._v(" "),s("p",[e._v("好了, 赶紧把卡解绑了, mmp")])])}),[],!1,null,null,null);"function"==typeof o&&o(i);t.default=i.exports}}]);