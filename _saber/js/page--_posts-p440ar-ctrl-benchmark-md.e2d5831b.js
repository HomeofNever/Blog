(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{119:function(e,t,a){"use strict";
/*!
 * vue-client-only v0.0.0-semantic-release
 * (c) 2021-present egoist <0x142857@gmail.com>
 * Released under the MIT License.
 */var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var a=t.parent,r=t.slots,o=t.props,n=r(),l=n.default;void 0===l&&(l=[]);var i=n.placeholder;return a._isMounted?l:(a.$once("hook:mounted",(function(){a.$forceUpdate()})),o.placeholderTag&&(o.placeholder||i)?e(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||i):l.length>0?l.map((function(){return e(!1)})):e(!1))}};e.exports=r},120:function(e,t,a){e.exports=a.p+"pages/_assets/file/p440ar-ctrl-benchmark/fio-raid0.tar.gz"},121:function(e,t,a){e.exports=a.p+"pages/_assets/file/p440ar-ctrl-benchmark/fio-hba.tar.gz"},157:function(e,t,a){"use strict";a.r(t);var r=a(119),o={components:{ClientOnly:a.n(r).a},data:function(){return{raid0:a(120),hba:a(121)}}},n=a(0),l=function(e){var t,a,r,o,n=(r=void 0,o="RAID",(t={}).type=a="post",t.internal=r,t.contentType="markdown",t.slug="p440ar-ctrl-benchmark",t.content=r,t.createdAt=new Date(16482528e5),t.updatedAt=new Date(1648314082251),t.title="P440ar Array Controller 直通评测",t.tags=["HP","HBA",o,"ZFS"],t.categories=["搞机"],t.layout=a,t.date="2022-03-26",t.markdownHeadings=[{text:"规格",slug:"规格",level:2},{text:"硬盘",slug:"硬盘",level:3},{text:"控制器",slug:"控制器",level:3},{text:"测试",slug:"测试",level:2},{text:"脚本",slug:"脚本",level:3},{text:"RAID 0 结果",slug:"raid-0-结果",level:3},{text:"HBA 结果",slug:"hba-结果",level:3},{text:"结论",slug:"结论",level:2}],t.excerpt='<p>最近到了一批<code v-pre="">HPE DL560 G9</code>的机器，默认带的是<a href="https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04496202">P440ar</a>的卡。但是目前我们都是用的ZFS，所以一般来说我们都会把卡刷成<code v-pre="">IT Mode</code>直通给系统。</p>\n',t.permalink="/2022/03/26/p440ar-ctrl-benchmark",t.assets={},t.attributes=t,t.tagsInfo=[{name:"HP",permalink:"/blog/tag/hp"},{name:"HBA",permalink:"/blog/tag/hba"},{name:o,permalink:"/blog/tag/raid"},{name:"ZFS",permalink:"/blog/tag/zfs"}],t.categoriesInfo=[{name:"搞机",permalink:"/blog/category/搞机"}],t),l=e.options.beforeCreate||[];e.options.beforeCreate=[function(){this.$page=n}].concat(l);["layout","transition"].forEach((function(t){var a=e.options.PageComponent;a&&(e.options[t]=a[t]),void 0===e.options[t]&&(e.options[t]=n[t])})),n.slug&&(e.options.name="page-wrapper-"+n.slug.replace(/[^0-9a-z\-]/gi,"-"))},i=Object(n.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("layout-manager",[a("p",[e._v("最近到了一批"),a("code",{pre:!0},[e._v("HPE DL560 G9")]),e._v("的机器，默认带的是"),a("saber-link",{attrs:{to:"https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04496202"}},[e._v("P440ar")]),e._v("的卡。但是目前我们都是用的ZFS，所以一般来说我们都会把卡刷成"),a("code",{pre:!0},[e._v("IT Mode")]),e._v("直通给系统。")],1),e._v(" "),a("p",[e._v("戴尔的卡已经有"),a("saber-link",{attrs:{to:"https://fohdeesha.com/docs/index.html"}},[e._v("很成熟的教程")]),e._v("了，但是HP似乎都没有，目前可以选择的方案看了一圈只有")],1),e._v(" "),a("ul",[a("li",[e._v("HBA Mode，他们的卡自带了这个模式")]),e._v(" "),a("li",[e._v("RAID 0 for each physical drive，我没想到的是他们界面直接就有这个选项，看来很多这样的需求")])]),e._v(" "),a("p",[e._v("但是继续找了一下并没有看到有关于更多ZFS的评测，所以这里就记录一下目前收集到的信息")]),e._v(" "),a("h2",{attrs:{id:"规格"}},[e._v("规格")]),e._v(" "),a("h3",{attrs:{id:"硬盘"}},[e._v("硬盘")]),e._v(" "),a("p",[e._v("硬盘是"),a("code",{pre:!0},[e._v("2.5 inch Seagate 1TB 7200 RPM")]),e._v("，具体信息：")]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":""}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-text"}},[a("code",{pre:!0,attrs:{class:"language-text"}},[e._v("Status: OK\nSerial Number: 9XG6E9NN\nModel: ST910006CLAR1000\nMedia Type: HDD\nCapacity: 1000 GB\nFirmware Version: AS0D\nEncryption Status\tNot Encrypted")])])]),a("h3",{attrs:{id:"控制器"}},[e._v("控制器")]),e._v(" "),a("p",[e._v("控制器读缓存开启，写缓存关闭")]),e._v(" "),a("h2",{attrs:{id:"测试"}},[e._v("测试")]),e._v(" "),a("h3",{attrs:{id:"脚本"}},[e._v("脚本")]),e._v(" "),a("p",[e._v("使用的是"),a("saber-link",{attrs:{to:"https://github.com/axboe/fio"}},[e._v("fio")]),e._v("，配合脚本")],1),e._v(" "),a("client-only",{attrs:{placeholder:"Loading Gist..."}},[a("pre",[a("code",[e._v('<vue-embed-gist gist-id="3667757" file="run_fio-sh" />\n')])])]),e._v(" "),a("h3",{attrs:{id:"raid-0-结果"}},[e._v("RAID 0 结果")]),e._v(" "),a("p",[a("saber-link",{attrs:{to:e.raid0}},[e._v("fio-raid0.tar.gz")])],1),e._v(" "),a("h3",{attrs:{id:"hba-结果"}},[e._v("HBA 结果")]),e._v(" "),a("p",[a("saber-link",{attrs:{to:e.hba}},[e._v("fio-hba.tar.gz")])],1),e._v(" "),a("h2",{attrs:{id:"结论"}},[e._v("结论")]),e._v(" "),a("p",[e._v("目前测试出来单盘的情况下，HBA和Raid0的结果在512K的读写下很相近，但是HBA模式表现似乎要更好一点。")]),e._v(" "),a("p",[e._v("所有结果都打包在上面，有需要的可以自行下载研究。如果有更多测试/模式想要测试，可以在评论区留言")])],1)}),[],!1,null,null,null);"function"==typeof l&&l(i);t.default=i.exports}}]);