(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{119:function(e,t,r){"use strict";
/*!
 * vue-client-only v0.0.0-semantic-release
 * (c) 2021-present egoist <0x142857@gmail.com>
 * Released under the MIT License.
 */var n={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var r=t.parent,n=t.slots,a=t.props,o=n(),s=o.default;void 0===s&&(s=[]);var i=o.placeholder;return r._isMounted?s:(r.$once("hook:mounted",(function(){r.$forceUpdate()})),a.placeholderTag&&(a.placeholder||i)?e(a.placeholderTag,{class:["client-only-placeholder"]},a.placeholder||i):s.length>0?s.map((function(){return e(!1)})):e(!1))}};e.exports=n},120:function(e,t,r){"use strict";var n,a=(n=r(121))&&"object"==typeof n&&"default"in n?n.default:n,o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.gistErr?[t("img",{attrs:{id:"notFound",height:"100%",width:"100%",src:"https://user-images.githubusercontent.com/883233/102043641-d4817580-3d89-11eb-885d-2786373932d4.png",alt:"404"}})]:[t("app-gist-core",{attrs:{"gist-div":this.gistData}})]],2)},staticRenderFns:[],_scopeId:"data-v-aefc6a2e",components:{appGistCore:{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",{domProps:{innerHTML:this._s(this.gistDiv)}})])},staticRenderFns:[],_scopeId:"data-v-8cf532b0",props:{gistDiv:{type:String,required:!0}}}},props:{gistId:{type:String,required:!0},file:{type:String,required:!1,default:""}},data:function(){return{gistData:"loading...",gistUrl:"https://gist.github.com/",gistErr:!1}},computed:{url:function(){return""+this.gistUrl+this.gistId+".json"},params:function(){return this.file.length>0?"file="+this.file:""},fullUrl:function(){return this.url+"?"+this.params}},watch:{gistId:{handler:function(){this.$data.gistErr=!1,this.$data.gistData="loading...",this.getGistData()},immediate:!0,deep:!0}},methods:{getGistData:function(){var e=this;a(this.fullUrl,{timeout:2e4},(function(t,r){t?e.$data.gistErr=!0:e.gistData=r.div}))}}},s={name:"vue-embed-gist",props:{gistId:{type:String,required:!0},file:{type:String,required:!1}},render:function(e){return e(o,{props:{gistId:this.gistId,file:this.file}})}};e.exports=s},121:function(e,t,r){var n=r(122)("jsonp");e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={});t||(t={});var s,i,c=t.prefix||"__jp",l=t.name||c+a++,u=t.param||"callback",d=null!=t.timeout?t.timeout:6e4,p=encodeURIComponent,f=document.getElementsByTagName("script")[0]||document.head;d&&(i=setTimeout((function(){g(),r&&r(new Error("Timeout"))}),d));function g(){s.parentNode&&s.parentNode.removeChild(s),window[l]=o,i&&clearTimeout(i)}return window[l]=function(e){n("jsonp got",e),g(),r&&r(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+u+"="+p(l)).replace("?&","?"),n('jsonp req "%s"',e),(s=document.createElement("script")).src=e,f.parentNode.insertBefore(s,f),function(){window[l]&&g()}};var a=0;function o(){}},122:function(e,t,r){(function(n){function a(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(123)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(a++,"%c"===e&&(o=a))})),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=a,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(a())}).call(this,r(19))},123:function(e,t,r){var n;function a(e){function r(){if(r.enabled){var e=r,a=+new Date,o=a-(n||a);e.diff=o,e.prev=n,e.curr=a,n=a;for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var a=t.formatters[n];if("function"==typeof a){var o=s[c];r=a.call(e,o),s.splice(c,1),c--}return r})),t.formatArgs.call(e,s);var l=r.log||t.log||console.log.bind(console);l.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=a.debug=a.default=a).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,a=0;a<n;a++)r[a]&&("-"===(e=r[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(124),t.names=[],t.skips=[],t.formatters={}},124:function(e,t){var r=1e3,n=6e4,a=60*n,o=24*a;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var i,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*a;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(i=e,o,"day")||s(i,a,"hour")||s(i,n,"minute")||s(i,r,"second")||i+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=a)return Math.round(e/a)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},125:function(e,t,r){e.exports=r.p+"pages/_assets/file/p440ar-ctrl-benchmark/fio-raid0.tar.gz"},126:function(e,t,r){e.exports=r.p+"pages/_assets/file/p440ar-ctrl-benchmark/fio-hba.tar.gz"},162:function(e,t,r){"use strict";r.r(t);var n=r(119),a=r.n(n),o=r(120),s=r.n(o),i={components:{ClientOnly:a.a,VueEmbedGist:s.a},data:function(){return{raid0:r(125),hba:r(126)}}},c=r(0),l=function(e){var t,r,n,a,o=(n=void 0,a="RAID",(t={}).type=r="post",t.internal=n,t.contentType="markdown",t.slug="p440ar-ctrl-benchmark",t.content=n,t.createdAt=new Date(16482528e5),t.updatedAt=new Date(1648314567599),t.title="P440ar Array Controller 直通评测",t.tags=["HP","HBA",a,"ZFS"],t.categories=["搞机"],t.layout=r,t.date="2022-03-26",t.markdownHeadings=[{text:"规格",slug:"规格",level:2},{text:"硬盘",slug:"硬盘",level:3},{text:"控制器",slug:"控制器",level:3},{text:"测试",slug:"测试",level:2},{text:"脚本",slug:"脚本",level:3},{text:"RAID 0 结果",slug:"raid-0-结果",level:3},{text:"HBA 结果",slug:"hba-结果",level:3},{text:"结论",slug:"结论",level:2}],t.excerpt='<p>最近到了一批<code v-pre="">HPE DL560 G9</code>的机器，默认带的是<a href="https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04496202">P440ar</a>的卡。但是目前我们都是用的ZFS，所以一般来说我们都会把卡刷成<code v-pre="">IT Mode</code>直通给系统。</p>\n',t.permalink="/2022/03/26/p440ar-ctrl-benchmark",t.assets={},t.attributes=t,t.tagsInfo=[{name:"HP",permalink:"/blog/tag/hp"},{name:"HBA",permalink:"/blog/tag/hba"},{name:a,permalink:"/blog/tag/raid"},{name:"ZFS",permalink:"/blog/tag/zfs"}],t.categoriesInfo=[{name:"搞机",permalink:"/blog/category/搞机"}],t),s=e.options.beforeCreate||[];e.options.beforeCreate=[function(){this.$page=o}].concat(s);["layout","transition"].forEach((function(t){var r=e.options.PageComponent;r&&(e.options[t]=r[t]),void 0===e.options[t]&&(e.options[t]=o[t])})),o.slug&&(e.options.name="page-wrapper-"+o.slug.replace(/[^0-9a-z\-]/gi,"-"))},u=Object(c.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout-manager",[r("p",[e._v("最近到了一批"),r("code",{pre:!0},[e._v("HPE DL560 G9")]),e._v("的机器，默认带的是"),r("saber-link",{attrs:{to:"https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04496202"}},[e._v("P440ar")]),e._v("的卡。但是目前我们都是用的ZFS，所以一般来说我们都会把卡刷成"),r("code",{pre:!0},[e._v("IT Mode")]),e._v("直通给系统。")],1),e._v(" "),r("p",[e._v("戴尔的卡已经有"),r("saber-link",{attrs:{to:"https://fohdeesha.com/docs/index.html"}},[e._v("很成熟的教程")]),e._v("了，但是HP似乎都没有，目前可以选择的方案看了一圈只有")],1),e._v(" "),r("ul",[r("li",[e._v("HBA Mode，他们的卡自带了这个模式")]),e._v(" "),r("li",[e._v("RAID 0 for each physical drive，我没想到的是他们界面直接就有这个选项，看来很多这样的需求")])]),e._v(" "),r("p",[e._v("但是继续找了一下并没有看到有关于更多ZFS的评测，所以这里就记录一下目前收集到的信息")]),e._v(" "),r("h2",{attrs:{id:"规格"}},[e._v("规格")]),e._v(" "),r("h3",{attrs:{id:"硬盘"}},[e._v("硬盘")]),e._v(" "),r("p",[e._v("硬盘是"),r("code",{pre:!0},[e._v("2.5 inch Seagate 1TB 7200 RPM")]),e._v("，具体信息：")]),e._v(" "),r("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":""}},[r("pre",{pre:!0,attrs:{class:"saber-highlight-code language-text"}},[r("code",{pre:!0,attrs:{class:"language-text"}},[e._v("Status: OK\nSerial Number: 9XG6E9NN\nModel: ST910006CLAR1000\nMedia Type: HDD\nCapacity: 1000 GB\nFirmware Version: AS0D\nEncryption Status\tNot Encrypted")])])]),r("h3",{attrs:{id:"控制器"}},[e._v("控制器")]),e._v(" "),r("p",[e._v("控制器读缓存开启，写缓存关闭")]),e._v(" "),r("h2",{attrs:{id:"测试"}},[e._v("测试")]),e._v(" "),r("h3",{attrs:{id:"脚本"}},[e._v("脚本")]),e._v(" "),r("p",[e._v("使用的是"),r("saber-link",{attrs:{to:"https://github.com/axboe/fio"}},[e._v("fio")]),e._v("，配合脚本")],1),e._v(" "),r("client-only",{attrs:{placeholder:"Loading Gist..."}},[r("pre",[r("code",[e._v('<vue-embed-gist gist-id="3667757" file="run_fio-sh" />\n')])])]),e._v(" "),r("h3",{attrs:{id:"raid-0-结果"}},[e._v("RAID 0 结果")]),e._v(" "),r("p",[r("saber-link",{attrs:{to:e.raid0}},[e._v("fio-raid0.tar.gz")])],1),e._v(" "),r("h3",{attrs:{id:"hba-结果"}},[e._v("HBA 结果")]),e._v(" "),r("p",[r("saber-link",{attrs:{to:e.hba}},[e._v("fio-hba.tar.gz")])],1),e._v(" "),r("h2",{attrs:{id:"结论"}},[e._v("结论")]),e._v(" "),r("p",[e._v("目前测试出来单盘的情况下，HBA和Raid0的结果在512K的读写下很相近，但是HBA模式表现似乎要更好一点。")]),e._v(" "),r("p",[e._v("所有结果都打包在上面，有需要的可以自行下载研究。如果有更多测试/模式想要测试，可以在评论区留言")])],1)}),[],!1,null,null,null);"function"==typeof l&&l(u);t.default=u.exports}}]);