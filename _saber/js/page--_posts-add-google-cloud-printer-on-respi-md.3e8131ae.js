(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{160:function(e,t,a){"use strict";a.r(t);var s=a(0),r=function(e){var t,a,s,r,o,n=(s=void 0,r="剧情前提",o="初探谷歌云打印",(t={}).type=a="post",t.internal=s,t.contentType="markdown",t.slug="add-google-cloud-printer-on-respi",t.content=s,t.createdAt=new Date(15431514e5),t.updatedAt=new Date(15778368e5),t.title="在树莓派上添加谷歌云打印",t.tags=["折腾"],t.categories=["技术"],t.layout=a,t.date="2018-11-25 21:10:00",t.updated="2020-01-01",t.markdownHeadings=[{text:"更新",slug:"更新",level:2},{text:r,slug:r,level:2},{text:o,slug:o,level:2},{text:"安装",slug:"安装",level:3},{text:"HP 驱动",slug:"hp-驱动",level:4},{text:"CUPS 提示",slug:"cups-提示",level:5},{text:"配置",slug:"配置",level:4},{text:"效果",slug:"效果",level:2}],t.excerpt="<p>谷歌在 2020 年 1月 1日 彻底关闭了这个服务</p>\n",t.permalink="/2018/11/25/add-google-cloud-printer-on-respi",t.assets={},t.attributes=t,t.tagsInfo=[{name:"折腾",permalink:"/blog/tag/折腾"}],t.categoriesInfo=[{name:"技术",permalink:"/blog/category/technology"}],t),p=e.options.beforeCreate||[];e.options.beforeCreate=[function(){this.$page=n}].concat(p);["layout","transition"].forEach((function(t){var a=e.options.PageComponent;a&&(e.options[t]=a[t]),void 0===e.options[t]&&(e.options[t]=n[t])})),n.slug&&(e.options.name="page-wrapper-"+n.slug.replace(/[^0-9a-z\-]/gi,"-"))},o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("layout-manager",[a("h2",{attrs:{id:"更新"}},[e._v("更新")]),e._v(" "),a("p",[e._v("谷歌在 2020 年 1月 1日 彻底关闭了这个服务")]),e._v(" "),a("h2",{attrs:{id:"剧情前提"}},[e._v("剧情前提")]),e._v(" "),a("p",[e._v("最近由于电脑突然坏了，退回去修了以后学校租了一台新的机器给到我。然而，我的配置全没了……emmmmm，然而这台电脑到时候又要还回去，而且平时也有同学回来找我借打印机，打算找个办法弄个方便点的共享")]),e._v(" "),a("p",[e._v("打印机型号是："),a("code",{pre:!0},[e._v("HP Deskjet 3054 All-in-One Printer - J610a")])]),e._v(" "),a("h2",{attrs:{id:"初探谷歌云打印"}},[e._v("初探谷歌云打印")]),e._v(" "),a("p",[e._v("刚好到学校的时候，有一个学长送了我一个树莓派。我平时给别人打印是让别人连接上我树莓派的热点，然而这样并不是很安全就是了。那，就在上面配置一下CUPS？")]),e._v(" "),a("p",[e._v("因为之前烧录系统的时候被人推荐了"),a("code",{pre:!0},[e._v("Arch")]),e._v("；谷歌的话，也有无GUI的"),a("saber-link",{attrs:{to:"https://support.google.com/a/answer/2906017?hl=en"}},[e._v("CUPS Connector")]),e._v("。那么……试试看吧")],1),e._v(" "),a("h3",{attrs:{id:"安装"}},[e._v("安装")]),e._v(" "),a("p",[a("saber-link",{attrs:{to:"https://github.com/google/cloud-print-connector"}},[e._v("Github")])],1),e._v(" "),a("p",[a("saber-link",{attrs:{to:"https://aur.archlinux.org/packages/cloud-print-connector-git/"}},[e._v("AUR REPO")])],1),e._v(" "),a("p",[e._v("顺便借着这个机会尝试了一下"),a("code",{pre:!0},[e._v("yay")]),e._v("：")]),e._v(" "),a("blockquote",[a("p",[e._v("yay 就是一个 pacman + makepkg 的 wrapper，可以让你直接安装 aur 包")])]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"bash"}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://aur.archlinux.org/yay\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" yay\nmakepkg -si")])])]),a("blockquote",[a("p",[e._v("注意，"),a("code",{pre:!0},[e._v("makepkg")]),e._v("不能运行在"),a("code",{pre:!0},[e._v("root")]),e._v("环境")])]),e._v(" "),a("p",[e._v("然后：")]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"bash"}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("yay -S cloud-print-connector-git")])])]),a("blockquote",[a("p",[e._v("可以顺便添加了"),a("code",{pre:!0},[e._v("gcp-cups-connector-systemd")]),e._v("，直接用"),a("code",{pre:!0},[e._v("systemctl")]),e._v("管理")])]),e._v(" "),a("h4",{attrs:{id:"hp-驱动"}},[e._v("HP 驱动")]),e._v(" "),a("p",[e._v("然而，驱动并不是很顺利。找了一圈并没有找到，但是HP有一个官方的提供给"),a("code",{pre:!0},[e._v("linux")]),e._v("打印支持的软件"),a("code",{pre:!0},[e._v("HPLIP")]),e._v("。"),a("saber-link",{attrs:{to:"https://developers.hp.com/hp-linux-imaging-and-printing"}},[e._v("网站")])],1),e._v(" "),a("p",[e._v("这个安装也有点难受，不过，aur也有这个的build（突然感受到一阵舒适）："),a("saber-link",{attrs:{to:"https://www.archlinux.org/packages/extra/x86_64/hplip/"}},[e._v("AUR REPO")])],1),e._v(" "),a("p",[e._v("装完以后CUPS就有对应的PPD了XD，正常添加即可")]),e._v(" "),a("p",[e._v("测试model选择"),a("code",{pre:!0},[e._v("HP Deskjet 3050 j610 Series, hpcups 3.18.6 (color)")]),e._v("可以正常使用")]),e._v(" "),a("h5",{attrs:{id:"cups-提示"}},[e._v("CUPS 提示")]),e._v(" "),a("ul",[a("li",[e._v("默认是监听"),a("code",{pre:!0},[e._v("localhost")]),e._v("，而且还有验证限制。所以……web端管理不如直接装一个nginx反代"),a("code",{pre:!0},[e._v("localhost:631")])]),e._v(" "),a("li",[e._v("如果你的用户没有权限添加打印机（"),a("code",{pre:!0},[e._v("forbidden")]),e._v("），把用户加进"),a("code",{pre:!0},[e._v("sys")]),e._v(" 即可："),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"bash"}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("usermod")]),e._v(" -a -G sys YourUser")])])]),a("blockquote",[a("p",[e._v("来自 "),a("saber-link",{attrs:{to:"https://unix.stackexchange.com/questions/235477/cups-add-printer-page-returns-forbidden-on-web-interface"}},[e._v("https://unix.stackexchange.com/questions/235477/cups-add-printer-page-returns-forbidden-on-web-interface")])],1)])])]),e._v(" "),a("h4",{attrs:{id:"配置"}},[e._v("配置")]),e._v(" "),a("p",[a("saber-link",{attrs:{to:"https://github.com/google/cloud-print-connector/wiki/Install"}},[e._v("官方wiki")])],1),e._v(" "),a("p",[e._v("默认connector的"),a("code",{pre:!0},[e._v("systemd")]),e._v("设置启动文件是在"),a("code",{pre:!0},[e._v("/etc/gcp-cups-connector/gcp-cups-connector.config.json")]),e._v("，文件夹似乎默认没有创建，所以自己创建，并且给好读写权限。")]),e._v(" "),a("p",[e._v("然后执行：")]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"bash"}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("gcp-connector-util init")])])]),a("p",[e._v("按照指引即可，中间会让你选择分享，可以先留空后面再在网页上添加电子邮箱分享；然后会在当前目录生成好配置。不要忘记复制过去，然后启动即可。")]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"bash"}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[e._v("systemctl start gcp-cups-connector")])])]),a("h2",{attrs:{id:"效果"}},[e._v("效果")]),e._v(" "),a("p",[e._v("现在只要谷歌账号登录进浏览器，在打印的时候就可以看到目标打印机了，完美！")]),e._v(" "),a("p",[e._v("而且和本地打印速度基本没差异，还可以在"),a("saber-link",{attrs:{to:"https://www.google.com/cloudprint/#printers"}},[e._v("web端")]),e._v("上传文件打印，很舒服")],1)])}),[],!1,null,null,null);"function"==typeof r&&r(o);t.default=o.exports}}]);