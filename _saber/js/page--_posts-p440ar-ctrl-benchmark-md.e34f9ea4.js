(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{120:function(t,e,a){t.exports=a.p+"pages/_assets/file/p440ar-ctrl-benchmark/fio-raid0.tar.gz"},121:function(t,e,a){t.exports=a.p+"pages/_assets/file/p440ar-ctrl-benchmark/fio-hba.tar.gz"},122:function(t,e,a){"use strict";var r=a(58);a.n(r).a},123:function(t,e,a){(t.exports=a(5)(!1)).push([t.i,".gist-iframe[data-v-191b604f]{width:100%;min-height:300px;margin:10px 0;border:transparent}",""])},159:function(t,e,a){"use strict";a.r(e);var r={data:function(){return{raid0:a(120),hba:a(121)}}},s=(a(122),a(0)),o=function(t){var e,a,r,s,o=(r=void 0,s="RAID",(e={}).type=a="post",e.internal=r,e.contentType="markdown",e.slug="p440ar-ctrl-benchmark",e.content=r,e.createdAt=new Date(16482528e5),e.updatedAt=new Date(1655891844544),e.title="P440ar Array Controller 直通评测",e.tags=["HP","HBA",s,"ZFS"],e.categories=["搞机"],e.layout=a,e.date="2022-03-26",e.markdownHeadings=[{text:"规格",slug:"规格",level:2},{text:"硬盘",slug:"硬盘",level:3},{text:"控制器",slug:"控制器",level:3},{text:"测试",slug:"测试",level:2},{text:"脚本",slug:"脚本",level:3},{text:"RAID 0 结果",slug:"raid-0-结果",level:3},{text:"HBA 结果",slug:"hba-结果",level:3},{text:"结论",slug:"结论",level:2}],e.excerpt='<p>最近到了一批<code v-pre="">HPE DL560 G9</code>的机器，默认带的是<a href="https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04496202">P440ar</a>的卡。但是目前我们都是用的ZFS，所以一般来说我们都会把卡刷成<code v-pre="">IT Mode</code>直通给系统。</p>\n',e.permalink="/2022/03/26/p440ar-ctrl-benchmark",e.assets={},e.attributes=e,e.tagsInfo=[{name:"HP",permalink:"/blog/tag/hp"},{name:"HBA",permalink:"/blog/tag/hba"},{name:s,permalink:"/blog/tag/raid"},{name:"ZFS",permalink:"/blog/tag/zfs"}],e.categoriesInfo=[{name:"搞机",permalink:"/blog/category/搞机"}],e),i=t.options.beforeCreate||[];t.options.beforeCreate=[function(){this.$page=o}].concat(i);["layout","transition"].forEach((function(e){var a=t.options.PageComponent;a&&(t.options[e]=a[e]),void 0===t.options[e]&&(t.options[e]=o[e])})),o.slug&&(t.options.name="page-wrapper-"+o.slug.replace(/[^0-9a-z\-]/gi,"-"))},i=Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout-manager",[a("p",[t._v("最近到了一批"),a("code",{pre:!0},[t._v("HPE DL560 G9")]),t._v("的机器，默认带的是"),a("saber-link",{attrs:{to:"https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04496202"}},[t._v("P440ar")]),t._v("的卡。但是目前我们都是用的ZFS，所以一般来说我们都会把卡刷成"),a("code",{pre:!0},[t._v("IT Mode")]),t._v("直通给系统。")],1),t._v(" "),a("p",[t._v("戴尔的卡已经有"),a("saber-link",{attrs:{to:"https://fohdeesha.com/docs/index.html"}},[t._v("很成熟的教程")]),t._v("了，但是HP似乎都没有，目前可以选择的方案看了一圈只有")],1),t._v(" "),a("ul",[a("li",[t._v("HBA Mode，他们的卡自带了这个模式")]),t._v(" "),a("li",[t._v("RAID 0 for each physical drive，我没想到的是他们界面直接就有这个选项，看来很多这样的需求")])]),t._v(" "),a("p",[t._v("但是继续找了一下并没有看到有关于更多ZFS的评测，所以这里就记录一下目前收集到的信息")]),t._v(" "),a("h2",{attrs:{id:"规格"}},[t._v("规格")]),t._v(" "),a("h3",{attrs:{id:"硬盘"}},[t._v("硬盘")]),t._v(" "),a("p",[t._v("硬盘是"),a("code",{pre:!0},[t._v("2.5 inch Seagate 1TB 7200 RPM")]),t._v("，具体信息：")]),t._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":""}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-text"}},[a("code",{pre:!0,attrs:{class:"language-text"}},[t._v("Status: OK\nSerial Number: 9XG6E9NN\nModel: ST910006CLAR1000\nMedia Type: HDD\nCapacity: 1000 GB\nFirmware Version: AS0D\nEncryption Status\tNot Encrypted")])])]),a("h3",{attrs:{id:"控制器"}},[t._v("控制器")]),t._v(" "),a("p",[t._v("控制器读缓存开启，写缓存关闭")]),t._v(" "),a("h2",{attrs:{id:"测试"}},[t._v("测试")]),t._v(" "),a("h3",{attrs:{id:"脚本"}},[t._v("脚本")]),t._v(" "),a("p",[t._v("使用的是"),a("saber-link",{attrs:{to:"https://github.com/axboe/fio"}},[t._v("fio")]),t._v("，配合脚本")],1),t._v(" "),a("iframe",{staticClass:"gist-iframe",attrs:{src:"https://gist.github.com/sennajox/3667757.pibb"}}),t._v(" "),a("h3",{attrs:{id:"raid-0-结果"}},[t._v("RAID 0 结果")]),t._v(" "),a("p",[a("saber-link",{attrs:{to:t.raid0}},[t._v("fio-raid0.tar.gz")])],1),t._v(" "),a("h3",{attrs:{id:"hba-结果"}},[t._v("HBA 结果")]),t._v(" "),a("p",[a("saber-link",{attrs:{to:t.hba}},[t._v("fio-hba.tar.gz")])],1),t._v(" "),a("h2",{attrs:{id:"结论"}},[t._v("结论")]),t._v(" "),a("p",[t._v("目前测试出来单盘的情况下，HBA和Raid0的结果在512K的读写下很相近，但是HBA模式表现似乎要更好一点。")]),t._v(" "),a("p",[t._v("所有结果都打包在上面，有需要的可以自行下载研究。如果有更多测试/模式想要测试，可以在评论区留言")])])}),[],!1,null,"191b604f",null);"function"==typeof o&&o(i);e.default=i.exports},58:function(t,e,a){var r=a(123);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(6).default)("06023ed4",r,!0,{sourceMap:!1})}}]);