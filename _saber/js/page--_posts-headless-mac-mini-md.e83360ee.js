(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{172:function(e,t,a){"use strict";a.r(t);var s=a(0),r=function(e){var t,a,s,r,n,o,i,l,c=(s=void 0,r="macos",n="mac mini",o="headless",i="事故前提",l="尝试动手",(t={}).type=a="post",t.internal=s,t.contentType="markdown",t.slug="headless-mac-mini",t.content=s,t.createdAt=new Date(16568928e5),t.updatedAt=new Date(1656999914637),t.title="Headless Mac Mini 折腾记",t.tags=[r,n,"vnc",o],t.categories=["技术"],t.layout=a,t.date="2022-07-04",t.description="Nix天生和JS一棒子包管理八字不合，在经过一系列斗争之后，我屈服了。搞个macos好了，毕竟现在大家适配不都是mac，实在是不想和工具打架了。",t.markdownHeadings=[{text:i,slug:i,level:2},{text:l,slug:l,level:2},{text:"Resolution 分辨率",slug:"resolution-分辨率",level:3},{text:"ScreenSaver 屏幕保护",slug:"screensaver-屏幕保护",level:3},{text:"重启",slug:"重启",level:3}],t.excerpt="<p>Nix天生和JS一棒子包管理八字不合，在经过一系列斗争之后，我屈服了。搞个macos好了，毕竟现在大家适配不都是mac，实在是不想和工具打架了。</p>\n",t.permalink="/2022/07/04/headless-mac-mini",t.assets={},t.attributes=t,t.tagsInfo=[{name:r,permalink:"/blog/tag/macos"},{name:n,permalink:"/blog/tag/mac-mini"},{name:"vnc",permalink:"/blog/tag/vnc"},{name:o,permalink:"/blog/tag/headless"}],t.categoriesInfo=[{name:"技术",permalink:"/blog/category/technology"}],t),p=e.options.beforeCreate||[];e.options.beforeCreate=[function(){this.$page=c}].concat(p);["layout","transition"].forEach((function(t){var a=e.options.PageComponent;a&&(e.options[t]=a[t]),void 0===e.options[t]&&(e.options[t]=c[t])})),c.slug&&(e.options.name="page-wrapper-"+c.slug.replace(/[^0-9a-z\-]/gi,"-"))},n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("layout-manager",[a("h2",{attrs:{id:"事故前提"}},[e._v("事故前提")]),e._v(" "),a("p",[e._v("Nix天生和JS一棒子包管理八字不合，在经过一系列斗争之后，我屈服了。搞个macos好了，毕竟现在大家适配不都是mac，实在是不想和工具打架了。")]),e._v(" "),a("p",[e._v("看了一眼，M2 Macbook马上就要出了，Air改了设计，我最喜欢的锥形设计没了，而且只有两个同侧的type c？还1100刀8GB？再见再见。那就看看M1 Macbook吧，这不是马上要发布新款了，估计要降价把，899刀，8G，怎么想要个16G这么难，而且还是感觉有点贵。反正都是用，看看有没有人出二手把。")]),e._v(" "),a("p",[e._v("看了一圈便宜了差不多100左右把，感觉还是一般版，主要是自己刚买了个笔记本，前前后后也花了1500，为啥我还要买个笔记本？出门带着也很重，那不如考虑一下mac mini好了，直接从笔记本远程上去。8G要649，不错，看一眼16G，哇塞要加200，隔着抢钱呢。不就是逼人买底配呗，那既然都是底配了，直接看二手，花的越少越好。500块钱，不错，还不用给税。那就这样愉快的定啦！")]),e._v(" "),a("h2",{attrs:{id:"尝试动手"}},[e._v("尝试动手")]),e._v(" "),a("p",[e._v("收到机器，配置好，看了一眼状态，启动88次，SSD写入300G读取500G，状态很好！主要是现在Mac SSD都是銲死的了，SSD没了机器也废了。")]),e._v(" "),a("p",[e._v("首先进去先到"),a("code",{pre:!0},[e._v("设置->共享")]),e._v("打开"),a("code",{pre:!0},[e._v("屏幕共享(vnc)")]),e._v("和"),a("code",{pre:!0},[e._v("远程登录(ssh)")]),e._v("。ssh我强烈建议开启，后续会提到为什么……")]),e._v(" "),a("h3",{attrs:{id:"resolution-分辨率"}},[e._v("Resolution 分辨率")]),e._v(" "),a("p",[e._v("由于默认没有显示器的情况下，链接VNC将会默认创建一个"),a("code",{pre:!0},[e._v("1920x1080")]),e._v("的"),a("code",{pre:!0},[e._v("Unknown Display")]),e._v("。这个东西的分辨率是无法调整，但是如果显示器的情况下VNC将会直接挂载现有的。我推荐这个时候可以用"),a("saber-link",{attrs:{to:"https://github.com/waydabber/BetterDisplay"}},[e._v("BetterDisplay")]),e._v("来创建一个合适分辨率的"),a("code",{pre:!0},[e._v("Dummy")]),e._v("，挂载上去，然后再链接。")],1),e._v(" "),a("p",[e._v("注意记得开启"),a("code",{pre:!0},[e._v("low resolution")]),e._v("否则苹果的retina设定，大小还是会不匹配。每次更改分辨率以后，这个软件会默认把这个勾去掉，所以记得重新打回去")]),e._v(" "),a("p",[e._v("如果需要重新启动VNC Server：")]),e._v(" "),a("blockquote",[a("p",[a("saber-link",{attrs:{to:"http://bytesandbolts.com/remotely-restart-mac-os-x-in-built-vnc-server/"}},[e._v("http://bytesandbolts.com/remotely-restart-mac-os-x-in-built-vnc-server/")])],1)]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"bash"}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -restart -agent")])])]),a("h3",{attrs:{id:"screensaver-屏幕保护"}},[e._v("ScreenSaver 屏幕保护")]),e._v(" "),a("p",[e._v("这个是真的头大，屏幕保护默认是"),a("strong",[e._v("不能从VNC解除的")]),e._v("。我尝试了很多组合键，最后还是ssh进去杀掉有用：")]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"bash"}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("killall")]),e._v(" ScreenSaverEngine")])])]),a("p",[e._v("其实是有个选项被从UI隐藏了，好家伙啊好家伙：")]),e._v(" "),a("blockquote",[a("p",[a("saber-link",{attrs:{to:"https://www.reddit.com/r/macmini/comments/posw4u/m1_mac_mini_screen_saver_still_randomly_invokes/"}},[e._v("https://www.reddit.com/r/macmini/comments/posw4u/m1_mac_mini_screen_saver_still_randomly_invokes/")])],1)]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"bash"}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-bash"}},[a("code",{pre:!0,attrs:{class:"language-bash"}},[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" defaults "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("write")]),e._v(" /Library/Preferences/com.apple.screensaver loginWindowIdleTime "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")])])])]),a("h3",{attrs:{id:"重启"}},[e._v("重启")]),e._v(" "),a("p",[e._v("这是另外一波头疼的问题，如果你开启了"),a("code",{pre:!0},[e._v("filevault")]),e._v("，那么重启以后必须要用键盘解开硬盘才能启动VNC这些服务。所以……这怎么搞啊艹，那就关了咯。")]),e._v(" "),a("p",[e._v("如果真的开了但是又要重启的话：")]),e._v(" "),a("blockquote",[a("p",[a("saber-link",{attrs:{to:"https://apple.stackexchange.com/questions/225818/how-to-perform-filevault-authenticated-restart-when-updating-osx-from-appstore"}},[e._v("https://apple.stackexchange.com/questions/225818/how-to-perform-filevault-authenticated-restart-when-updating-osx-from-appstore")])],1)]),e._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":""}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-text"}},[a("code",{pre:!0,attrs:{class:"language-text"}},[e._v("sudo fdesetup authrestart")])])])])}),[],!1,null,null,null);"function"==typeof r&&r(n);t.default=n.exports}}]);