(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{119:function(t,e,a){t.exports=a.p+"pages/_assets/file/p440ar-ctrl-benchmark/fio-raid0.tar"},120:function(t,e,a){t.exports=a.p+"pages/_assets/file/p440ar-ctrl-benchmark/fio-hba.tar"},156:function(t,e,a){"use strict";a.r(e);var r={computed:{raid0:function(){return a(119)},hba:function(){return a(120)}}},o=a(0),n=function(t){var e,a,r,o,n=(r=void 0,o="RAID",(e={}).type=a="post",e.internal=r,e.contentType="markdown",e.slug="p440ar-ctrl-benchmark",e.content=r,e.createdAt=new Date(16482528e5),e.updatedAt=new Date(1648288478470),e.title="P440ar Array Controller 直通评测",e.tags=["HP","HBA",o,"ZFS"],e.categories=["搞机"],e.layout=a,e.date="2022-03-26",e.markdownHeadings=[{text:"规格",slug:"规格",level:2},{text:"硬盘",slug:"硬盘",level:3},{text:"控制器",slug:"控制器",level:3},{text:"测试",slug:"测试",level:2},{text:"脚本",slug:"脚本",level:3},{text:"RAID 0 结果",slug:"raid-0-结果",level:3},{text:"HBA 结果",slug:"hba-结果",level:3},{text:"结论",slug:"结论",level:2}],e.excerpt='<p>最近到了一批<code v-pre="">HPE DL560 G9</code>的机器，默认带的是<a href="https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04496202">P440ar</a>的卡。但是目前我们都是用的ZFS，所以一般来说我们都会把卡刷成<code v-pre="">IT Mode</code>直通给系统。</p>\n',e.permalink="/2022/03/26/p440ar-ctrl-benchmark",e.assets={},e.attributes=e,e.tagsInfo=[{name:"HP",permalink:"/blog/tag/hp"},{name:"HBA",permalink:"/blog/tag/hba"},{name:o,permalink:"/blog/tag/raid"},{name:"ZFS",permalink:"/blog/tag/zfs"}],e.categoriesInfo=[{name:"搞机",permalink:"/blog/category/搞机"}],e),s=t.options.beforeCreate||[];t.options.beforeCreate=[function(){this.$page=n}].concat(s);["layout","transition"].forEach((function(e){var a=t.options.PageComponent;a&&(t.options[e]=a[e]),void 0===t.options[e]&&(t.options[e]=n[e])})),n.slug&&(t.options.name="page-wrapper-"+n.slug.replace(/[^0-9a-z\-]/gi,"-"))},s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout-manager",[a("p",[t._v("最近到了一批"),a("code",{pre:!0},[t._v("HPE DL560 G9")]),t._v("的机器，默认带的是"),a("saber-link",{attrs:{to:"https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-c04496202"}},[t._v("P440ar")]),t._v("的卡。但是目前我们都是用的ZFS，所以一般来说我们都会把卡刷成"),a("code",{pre:!0},[t._v("IT Mode")]),t._v("直通给系统。")],1),t._v(" "),a("p",[t._v("戴尔的卡已经有"),a("saber-link",{attrs:{to:"https://fohdeesha.com/docs/index.html"}},[t._v("很成熟的教程")]),t._v("了，但是HP似乎都没有，目前可以选择的方案看了一圈只有")],1),t._v(" "),a("ul",[a("li",[t._v("HBA Mode，他们的卡自带了这个模式")]),t._v(" "),a("li",[t._v("RAID 0 for each physical drive，我没想到的是他们界面直接就有这个选项，看来很多这样的需求")])]),t._v(" "),a("p",[t._v("但是继续找了一下并没有看到有关于更多ZFS的评测，所以这里就记录一下目前收集到的信息")]),t._v(" "),a("h2",{attrs:{id:"规格"}},[t._v("规格")]),t._v(" "),a("h3",{attrs:{id:"硬盘"}},[t._v("硬盘")]),t._v(" "),a("p",[t._v("硬盘是"),a("code",{pre:!0},[t._v("2.5 inch Seagate 1TB 7200 RPM")]),t._v("，具体信息：")]),t._v(" "),a("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":""}},[a("pre",{pre:!0,attrs:{class:"saber-highlight-code language-text"}},[a("code",{pre:!0,attrs:{class:"language-text"}},[t._v("Status\t OK\nSerial Number\t9XG6E9NN\nModel\tST910006CLAR1000\nMedia Type\tHDD\nCapacity\t1000 GB\nFirmware Version\tAS0D\nDrive Configuration\tConfigured\nEncryption Status\tNot Encrypted")])])]),a("h3",{attrs:{id:"控制器"}},[t._v("控制器")]),t._v(" "),a("p",[t._v("控制器读缓存开启，写缓存关闭")]),t._v(" "),a("h2",{attrs:{id:"测试"}},[t._v("测试")]),t._v(" "),a("h3",{attrs:{id:"脚本"}},[t._v("脚本")]),t._v(" "),a("p",[t._v("使用的是fio，配合脚本")]),t._v(" "),a("p",[a("saber-link",{attrs:{to:"https://gist.github.com/sennajox/3667757"}},[t._v("https://gist.github.com/sennajox/3667757")])],1),t._v(" "),a("h3",{attrs:{id:"raid-0-结果"}},[t._v("RAID 0 结果")]),t._v(" "),a("p",[a("saber-link",{attrs:{to:t.raid0}},[t._v("fio-raid0.tar.gz")])],1),t._v(" "),a("h3",{attrs:{id:"hba-结果"}},[t._v("HBA 结果")]),t._v(" "),a("p",[a("saber-link",{attrs:{to:t.hba}},[t._v("fio-hba.tar.gz")])],1),t._v(" "),a("h2",{attrs:{id:"结论"}},[t._v("结论")]),t._v(" "),a("p",[t._v("目前测试出来单盘的情况下，HBA和Raid0的结果在512K的读写下很相近，但是HBA模式表现似乎要更好一点。")]),t._v(" "),a("p",[t._v("所有结果都打包在上面，有需要的可以自行下载研究。如果有更多测试/模式想要测试，可以在评论区留言")])])}),[],!1,null,null,null);"function"==typeof n&&n(s);e.default=s.exports}}]);